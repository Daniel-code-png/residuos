<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capacitación y Quiz: Gestión de Residuos Unicatólica</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fc;
        }
        .section-card {
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 10px 30px -5px rgba(0, 0, 0, 0.05);
            border-left: 5px solid #017C7F; /* Color principal de Unicatólica (Verde Mar) */
            padding: 1.5rem;
        }
        .header-bg {
            background-color: #004B8D; /* Azul Institucional */
        }
        .text-primary {
            color: #017C7F;
        }
        .icon-box {
            background-color: #e6f3f3;
            width: 4rem;
            height: 4rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .h-section {
            font-size: 1.5rem;
            font-weight: 700;
        }
        .color-card {
            border-radius: 0.75rem;
            padding: 1rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        /* ESTILOS ESPECÍFICOS DEL QUIZ (CORREGIDOS) */
        .quiz-option {
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
            cursor: pointer;
            text-align: left;
            width: 100%;
        }
        .quiz-option:hover:not(.disabled) {
            background-color: #f1f5f9;
        }
        .selected-correct {
            background-color: #d1fae5 !important; /* Verde muy claro */
            border-color: #10b981 !important; /* Verde fuerte */
            color: #065f46;
            font-weight: 700;
        }
        .selected-incorrect {
            background-color: #fee2e2 !important; /* Rojo muy claro */
            border-color: #ef4444 !important; /* Rojo fuerte */
            color: #991b1b;
            font-weight: 700;
        }
        .disabled {
            pointer-events: none;
        }

        /* Clase para asegurar la visibilidad del botón Siguiente */
        .btn-next-active {
            opacity: 1;
            cursor: pointer;
            background-color: #004B8D; /* Azul para el botón activo */
            color: white;
        }
        .btn-next-disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background-color: #9ca3af; /* Gris para el botón deshabilitado */
            color: #374151;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <!-- Contenido Principal de la Infografía -->
    <div id="infographic-content" class="max-w-4xl mx-auto">
        <!-- Header / Title -->
        <div class="header-bg text-white p-6 rounded-t-xl mb-6">
            <h1 class="text-3xl font-extrabold text-center mb-1">
                GUÍA DE GESTIÓN DE RESIDUOS SÓLIDOS
            </h1>
            <h2 class="text-xl font-semibold text-center opacity-90">
                Unicatólica: Capacitación y Compromiso Ambiental
            </h2>
        </div>

        <div class="space-y-8">
            <!-- 1. Diagnóstico Clave -->
            <div class="section-card">
                <h3 class="h-section text-primary mb-3">1. Diagnóstico Clave y Oportunidades</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                    
                    <div class="flex items-start space-x-3 bg-gray-50 p-3 rounded-lg">
                        <div class="icon-box">
                            <!-- Icono de libro -->
                            <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5s3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18s-3.332.477-4.5 1.253"></path></svg>
                        </div>
                        <div>
                            <p class="font-bold text-gray-700">Conocimiento Existente</p>
                            <p class="text-sm text-gray-600">La comunidad conoce la importancia del reciclaje.</p>
                        </div>
                    </div>

                    <div class="flex items-start space-x-3 bg-gray-50 p-3 rounded-lg">
                        <div class="icon-box">
                            <!-- Icono de alerta -->
                            <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-3 2-3s3 1 3 3-.5 5-2 5l-4-4"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11V6M16 16.5L12 19.5M8 16.5L12 19.5"></path></svg>
                        </div>
                        <div>
                            <p class="font-bold text-gray-700">Necesidad Prioritaria</p>
                            <p class="text-sm text-gray-600">Se requiere mayor capacitación y sensibilización constante para transformar hábitos.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 2. Retos de Infraestructura y Clasificación -->
            <div class="section-card">
                <h3 class="h-section text-primary mb-3">2. Retos de Infraestructura y Clasificación</h3>
                <div class="flex flex-col md:flex-row gap-6">
                    
                    <!-- Reto 1: Infraestructura -->
                    <div class="md:w-1/2 p-4 border border-gray-100 rounded-lg bg-white">
                        <div class="icon-box mx-auto mb-3">
                            <!-- Icono de edificio -->
                            <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h-2m2 0h-2m-2 0h-2m-2 0h-2m-2 0h-2M9 5h6M9 5h6M9 9h6M9 9h6M9 13h6M9 13h6M9 17h6M9 17h6"></path></svg>
                        </div>
                        <p class="text-center font-semibold text-lg mb-1">Puntos Ecológicos</p>
                        <ul class="list-disc list-inside text-sm text-gray-600 space-y-1 text-left">
                            <li>Necesidad de optimización en diseño y ubicación.</li>
                            <li>Mejorar la señalización para evitar confusión.</li>
                            <li>Asegurar una distribución estratégica en campus.</li>
                        </ul>
                    </div>

                    <!-- Reto 2: Clasificación -->
                    <div class="md:w-1/2 p-4 border border-gray-100 rounded-lg bg-white">
                        <div class="icon-box mx-auto mb-3">
                            <!-- Icono de caneca -->
                            <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
                        </div>
                        <p class="text-center font-semibold text-lg mb-1">Separación en la Fuente</p>
                        <p class="text-sm text-gray-600 text-center mb-2 font-semibold">Usar el Código de Colores (Res. 2184 de 2019):</p>
                        <div class="flex justify-center space-x-2 text-xs font-semibold mt-2">
                            <!-- Uso de colores institucionales/reglamentarios -->
                            <span class="p-1 rounded text-white font-bold" style="background-color: #017C7F;">VERDE</span>
                            <span class="p-1 rounded text-white font-bold" style="background-color: #004B8D;">BLANCO</span>
                            <span class="p-1 rounded text-white font-bold bg-gray-600">NEGRO</span>
                        </div>
                    </div>

                </div>
            </div>
            
            <!-- 3. Ejes de la Ruta de Mejora -->
            <div class="section-card">
                <h3 class="h-section text-primary mb-3">3. Ruta de Mejora: 3 Ejes Estratégicos</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

                    <!-- Eje 1: Educación y Cultura -->
                    <div class="p-4 bg-blue-50 rounded-lg text-center">
                        <div class="icon-box mx-auto mb-3" style="background-color: #dbeaff;">
                            <!-- Icono de educacion -->
                            <svg class="w-8 h-8 text-blue-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5s3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18s-3.332.477-4.5 1.253"></path></svg>
                        </div>
                        <p class="font-extrabold text-blue-800">CULTURA Y VALORES</p>
                        <p class="text-sm text-gray-700 mt-1">Fortalecer la Educación Ambiental y articularla con el PEI y la Encíclica Laudato Si’.</p>
                    </div>

                    <!-- Eje 2: Monitoreo Digital -->
                    <div class="p-4 bg-green-50 rounded-lg text-center">
                        <div class="icon-box mx-auto mb-3" style="background-color: #e6f9e6;">
                            <!-- Icono de gráfico -->
                            <svg class="w-8 h-8 text-green-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-5m6 5v-5m-9 5H6m3 0h6m3 0h3M3 8l4.897 4.897 4.215-4.215L18 17"></path></svg>
                        </div>
                        <p class="font-extrabold text-green-800">MONITOREO Y DATOS</p>
                        <p class="text-sm text-gray-700 mt-1">Implementar herramientas tecnológicas (apps/sistemas) para medir y optimizar la gestión de residuos.</p>
                    </div>

                    <!-- Eje 3: Compromiso Comunitario -->
                    <div class="p-4 bg-red-50 rounded-lg text-center">
                        <div class="icon-box mx-auto mb-3" style="background-color: #ffe6e6;">
                            <!-- Icono de comunidad -->
                            <svg class="w-8 h-8 text-red-800" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h-4v-4h-2v4H7M3 10l9-6 9 6-9 6-9-6z"></path></svg>
                        </div>
                        <p class="font-extrabold text-red-800">COMPROMISO TOTAL</p>
                        <p class="text-sm text-gray-700 mt-1">El éxito depende de la acción diaria de estudiantes, docentes y administrativos.</p>
                    </div>

                </div>
            </div>
            
            <!-- 4. Capacitación Práctica - Detallada -->
            <div class="section-card" style="border-left: 5px solid #004B8D;">
                <h3 class="h-section text-primary mb-4 text-center">4. CAPACITACIÓN PRÁCTICA: PASOS CLAVE</h3>
                <p class="text-gray-600 text-center mb-6 max-w-2xl mx-auto font-semibold">El éxito comienza con la separación correcta. Sigue estos tres pasos fundamentales.</p>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6">

                    <!-- PASO 1: CÓDIGO DE COLORES (Separación en la Fuente) -->
                    <div class="lg:col-span-1 xl:col-span-2">
                        <h4 class="text-xl font-extrabold text-gray-800 mb-4 border-b pb-2">Paso 1: Aplicación del Código de Colores (Separación en la Fuente)</h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            
                            <!-- BLANCO (APROVECHABLES) -->
                            <div class="color-card bg-white shadow-md border-t-4 border-blue-500">
                                <p class="w-full py-2 px-1 rounded-t-lg font-extrabold text-white text-lg" style="background-color: #004B8D;">BLANCO</p>
                                <h5 class="font-bold text-gray-800 mt-3 mb-1 text-base">APROVECHABLES</h5>
                                <p class="text-xs text-gray-600 mb-2 font-semibold">Deben estar limpios y secos.</p>
                                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1 text-left w-full pl-4">
                                    <li>Plástico (botellas, envases)</li>
                                    <li>Papel y Cartón Limpios</li>
                                    <li>Vidrio y Metal (Latas)</li>
                                </ul>
                            </div>

                            <!-- VERDE (ORGÁNICOS) -->
                            <div class="color-card bg-green-50 shadow-md border-t-4 border-green-500">
                                <p class="w-full py-2 px-1 rounded-t-lg font-extrabold text-white text-lg" style="background-color: #017C7F;">VERDE</p>
                                <h5 class="font-bold text-gray-800 mt-3 mb-1 text-base">ORGÁNICOS APROVECHABLES</h5>
                                <p class="text-xs text-gray-600 mb-2 font-semibold">Para compostaje y abono.</p>
                                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1 text-left w-full pl-4">
                                    <li>Restos de Comida / Vegetales</li>
                                    <li>Desechos de Jardinería</li>
                                    <li>Borra de Café</li>
                                </ul>
                            </div>

                            <!-- NEGRO (NO APROVECHABLES) -->
                            <div class="color-card bg-gray-100 shadow-md border-t-4 border-gray-600">
                                <p class="w-full py-2 px-1 rounded-t-lg font-extrabold text-white text-lg bg-gray-800">NEGRO</p>
                                <h5 class="font-bold text-gray-800 mt-3 mb-1 text-base">NO APROVECHABLES</h5>
                                <p class="text-xs text-gray-600 mb-2 font-semibold">Basura o rechazo.</p>
                                <ul class="list-disc list-inside text-sm text-gray-700 space-y-1 text-left w-full pl-4">
                                    <li>Papel y Cartón Contaminados (Grasa)</li>
                                    <li>Papel Higiénico / Servilletas Usadas</li>
                                    <li>Icopor / Chicles / Colillas</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- PASO 2 Y 3: RESIDUOS ESPECIALES Y ALMACENAMIENTO -->
                    <div class="lg:col-span-1 xl:col-span-1">
                        <h4 class="text-xl font-extrabold text-gray-800 mb-4 border-b pb-2">Pasos 2 y 3: Manejo Especializado</h4>
                        <div class="space-y-4">
                            
                            <!-- Residuos Pos-Consumo -->
                            <div class="p-4 bg-yellow-50 rounded-lg border-l-4 border-yellow-500">
                                <div class="font-bold text-yellow-800 flex items-center mb-2">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v3m0 3h.01M19 19H5a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4l2-2h4a2 2 0 012 2v10a2 2 0 01-2 2z"></path></svg>
                                    <span class="text-lg">Paso 2: Residuos Pos-Consumo</span>
                                </div>
                                <p class="text-sm text-gray-700 mb-2">Requieren manejo diferenciado. No van en los puntos ecológicos comunes:</p>
                                <ul class="list-disc list-inside text-xs text-gray-600 space-y-0.5 pl-2">
                                    <li class="font-medium text-gray-800">Medicamentos Vencidos: Disponer en los puntos azules de farmacias.</li>
                                    <li class="font-medium text-gray-800">Pilas y Baterías: Usar contenedores especiales designados.</li>
                                    <li class="font-medium text-gray-800">Luminarias/Bombillos: Entregar al personal de mantenimiento o puntos de acopio especiales.</li>
                                </ul>
                            </div>

                            <!-- Almacenamiento Central -->
                            <div class="p-4 bg-gray-50 rounded-lg border-l-4 border-gray-500">
                                <div class="font-bold text-gray-800 flex items-center mb-2">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7h16M4 12h16M4 17h16M4 21h16M4 3h16"></path></svg>
                                    <span class="text-lg">Paso 3: Almacenamiento Central</span>
                                </div>
                                <p class="text-sm text-gray-700 mb-2">Luego de la separación en la fuente, los residuos llegan al Centro de Acopio Temporal (CAT):</p>
                                <ul class="list-disc list-inside text-xs text-gray-600 space-y-0.5 pl-2">
                                    <li class="font-medium text-gray-800">Residuos Comunes (Negro): Recolección diaria para su disposición final.</li>
                                    <li class="font-medium text-gray-800">Residuos Aprovechables (Blanco): Compactación y entrega a la organización de recicladores formalizada.</li>
                                    <li class="font-medium text-gray-800">Residuos Orgánicos (Verde): Procesamiento para la elaboración de abono (Compostaje).</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            
            <!-- Botón de Quiz -->
            <div id="quiz-start-area" class="text-center p-6 bg-white rounded-xl border-t-4 border-primary shadow-lg">
                <h4 class="text-xl font-bold text-gray-800 mb-4">Unicatólica Sostenible es Compromiso de Todos</h4>
                <button onclick="startQuiz()" class="px-8 py-3 bg-primary text-white font-bold rounded-full shadow-lg hover:bg-opacity-90 transform hover:scale-105 transition duration-300" style="background-color: #017C7F;">
                    <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
                    Iniciar Quiz de Verificación
                </button>
            </div>
        </div>
    </div>
    
    <!-- Contenedor del Quiz (Inicialmente Oculto) -->
    <div id="quiz-container" class="hidden p-6 md:p-10 max-w-3xl mx-auto mt-8 bg-white rounded-xl shadow-2xl w-full">
        <h2 class="text-2xl font-extrabold text-center mb-6 text-primary border-b pb-3">Quiz de Gestión de Residuos</h2>

        <div id="quiz-area">
            <!-- La pregunta y las opciones se cargarán aquí -->
            <div class="text-lg font-semibold text-gray-800 mb-4" id="question-text"></div>
            
            <div class="space-y-3" id="options-container">
                <!-- Opciones -->
            </div>

            <div class="mt-6 flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0">
                <div class="text-sm font-medium" id="feedback-message"></div>
                <div class="flex items-center space-x-4">
                    <p class="text-sm font-medium text-gray-500" id="progress-text">Pregunta 1 de 5</p>
                    <!-- El botón siguiente usa clases dinámicas para la visibilidad -->
                    <button id="next-button" onclick="nextQuestion()" class="px-6 py-2 font-bold rounded-full transition duration-300 btn-next-disabled">
                        Siguiente
                    </button>
                </div>
            </div>

            <!-- Racional/Explicación -->
            <div id="rationale-box" class="mt-8 p-4 rounded-lg border-l-4 border-gray-400 bg-gray-50 hidden">
                <p class="font-bold text-gray-700">Explicación:</p>
                <p id="rationale-text" class="text-sm text-gray-600 mt-1"></p>
            </div>

        </div>

        <!-- Área de Resultados (Oculta hasta el final) -->
        <div id="result-area" class="hidden text-center py-10">
            <h3 class="text-3xl font-extrabold mb-4" id="final-message">¡Resultado del Quiz!</h3>
            <p class="text-6xl font-black text-primary mb-6" id="score-text">0/5</p>
            <p class="text-lg text-gray-700 mb-6" id="feedback-text-final"></p>
            <button onclick="restartQuiz()" class="px-8 py-3 bg-gray-500 text-white font-bold rounded-full shadow-lg hover:bg-opacity-90 transform hover:scale-105 transition duration-300">
                Volver a la Capacitación
            </button>
        </div>
    </div>


    <script>
        // Array de preguntas y respuestas basado en la infografía
        const quizQuestions = [
            {
                question: "¿Qué color de contenedor está destinado a los residuos APROVECHABLES que están limpios y secos (plástico, papel, metal)?",
                options: [
                    { text: "VERDE", isCorrect: false, rationale: "El contenedor VERDE es para residuos ORGÁNICOS aprovechables (restos de comida, jardinería)." },
                    { text: "NEGRO", isCorrect: false, rationale: "El contenedor NEGRO es para residuos NO APROVECHABLES (rechazo, papel sucio, icopor)." },
                    { text: "BLANCO", isCorrect: true, rationale: "El color BLANCO se utiliza para residuos aprovechables como plástico, vidrio, metal, papel y cartón limpios." }
                ]
            },
            {
                question: "¿Cuál es el destino de los residuos depositados en el contenedor de color VERDE?",
                options: [
                    { text: "Entrega a recicladores formalizados.", isCorrect: false, rationale: "Los recicladores formalizados reciben los materiales del contenedor blanco (aprovechables secos)." },
                    { text: "Disposición final en relleno sanitario.", isCorrect: false, rationale: "Este es el destino de los residuos no aprovechables (caneca negra)." },
                    { text: "Procesamiento para la elaboración de abono (Compostaje).", isCorrect: true, rationale: "El contenedor VERDE es para orgánicos aprovechables, que son usados para hacer compost." }
                ]
            },
            {
                question: "¿Qué acción se debe evitar y dónde se clasifica el papel y cartón CONTAMINADOS con grasa (como cajas de pizza usadas)?",
                options: [
                    { text: "Va en el contenedor BLANCO, después de limpiarlo.", isCorrect: false, rationale: "Si el papel o cartón está contaminado con grasa, no es recuperable y debe ir en el negro." },
                    { text: "Va en el contenedor NEGRO, como residuo NO APROVECHABLE.", isCorrect: true, rationale: "El papel y cartón contaminados (grasosos, sucios) se consideran residuos de rechazo y deben ir en el contenedor NEGRO." },
                    { text: "Va en el contenedor VERDE, pues es un material orgánico.", isCorrect: false, rationale: "El contenedor VERDE es para restos de comida o jardinería, no para cartón sucio." }
                ]
            },
            {
                question: "Los medicamentos vencidos, pilas y luminarias se consideran:",
                options: [
                    { text: "Residuos Orgánicos Aprovechables.", isCorrect: false, rationale: "Los orgánicos son restos de comida y jardinería." },
                    { text: "Residuos Comunes de Rechazo (Negro).", isCorrect: false, rationale: "Estos residuos son peligrosos y NO deben ir en el contenedor negro." },
                    { text: "Residuos Pos-Consumo que requieren manejo diferenciado.", isCorrect: true, rationale: "Estos son residuos especiales (Pos-Consumo) que deben llevarse a puntos de acopio dedicados (ej. puntos azules de farmacias)." }
                ]
            },
            {
                question: "Según la Ruta de Mejora de Unicatólica, ¿cuál es el Eje Estratégico relacionado con la implementación de 'herramientas tecnológicas (apps/sistemas)'?",
                options: [
                    { text: "Eje 1: Cultura y Valores.", isCorrect: false, rationale: "Cultura y Valores se enfoca en Educación Ambiental y articulación con el PEI y Laudato Si’." },
                    { text: "Eje 3: Compromiso Total.", isCorrect: false, rationale: "Compromiso Total se refiere a la acción diaria de la comunidad." },
                    { text: "Eje 2: Monitoreo y Datos.", isCorrect: true, rationale: "El Eje 2 se centra en implementar tecnología para medir y optimizar la gestión de residuos." }
                ]
            }
        ];

        let currentQuestionIndex = 0;
        let score = 0;
        let questionAnswered = false;

        // --- FUNCIONES DE CONTROL DEL QUIZ ---

        function startQuiz() {
            // Ocultar la infografía y mostrar el contenedor del quiz
            document.getElementById('infographic-content').classList.add('hidden');
            document.getElementById('quiz-container').classList.remove('hidden');
            document.getElementById('result-area').classList.add('hidden');
            document.getElementById('quiz-area').classList.remove('hidden');
            
            // Reiniciar variables
            currentQuestionIndex = 0;
            score = 0;
            loadQuestion();
            window.scrollTo({ top: 0, behavior: 'smooth' }); // Mover la vista al inicio del quiz
        }

        function loadQuestion() {
            if (currentQuestionIndex >= quizQuestions.length) {
                showResult();
                return;
            }

            const currentQ = quizQuestions[currentQuestionIndex];
            const optionsContainer = document.getElementById('options-container');
            
            // Reiniciar estado
            questionAnswered = false;
            document.getElementById('next-button').classList.add('btn-next-disabled');
            document.getElementById('next-button').classList.remove('btn-next-active');
            document.getElementById('rationale-box').classList.add('hidden');
            document.getElementById('feedback-message').textContent = '';
            optionsContainer.innerHTML = '';

            // Actualizar textos
            document.getElementById('question-text').textContent = `${currentQuestionIndex + 1}. ${currentQ.question}`;
            document.getElementById('progress-text').textContent = `Pregunta ${currentQuestionIndex + 1} de ${quizQuestions.length}`;

            // Cargar opciones
            currentQ.options.forEach((option, index) => {
                const optionButton = document.createElement('button');
                optionButton.classList.add(
                    'quiz-option', 'p-4', 'border-2', 'border-gray-200', 'rounded-lg', 'font-medium', 'text-gray-700', 'select-none', 'shadow-sm'
                );
                optionButton.textContent = option.text;
                optionButton.setAttribute('data-index', index);
                optionButton.onclick = () => selectAnswer(optionButton, currentQ, option);
                optionsContainer.appendChild(optionButton);
            });
        }

        function selectAnswer(selectedButton, currentQ, selectedOption) {
            if (questionAnswered) return;
            questionAnswered = true;

            const allButtons = document.querySelectorAll('.quiz-option');
            allButtons.forEach(btn => btn.classList.add('disabled')); // Deshabilitar otras opciones

            const isCorrect = selectedOption.isCorrect;

            if (isCorrect) {
                score++;
                selectedButton.classList.add('selected-correct', 'border-green-500');
                document.getElementById('feedback-message').textContent = '¡Correcto!';
                document.getElementById('feedback-message').classList.add('text-green-600');
                document.getElementById('feedback-message').classList.remove('text-red-600');
            } else {
                selectedButton.classList.add('selected-incorrect', 'border-red-500');
                document.getElementById('feedback-message').textContent = 'Incorrecto. ¡Revisa la explicación!';
                document.getElementById('feedback-message').classList.add('text-red-600');
                document.getElementById('feedback-message').classList.remove('text-green-600');

                // Mostrar la opción correcta
                const correctOption = currentQ.options.findIndex(opt => opt.isCorrect);
                allButtons[correctOption].classList.add('selected-correct', 'border-green-500', 'ring-2', 'ring-green-500');
                
            }
            selectedButton.classList.remove('border-gray-200'); // Quitar borde genérico

            // Mostrar el racional (explicación)
            document.getElementById('rationale-text').textContent = selectedOption.rationale;
            document.getElementById('rationale-box').classList.remove('hidden');

            // Habilitar y dar estilo al botón de siguiente (SOLUCIÓN AL BOTÓN INVISIBLE)
            const nextButton = document.getElementById('next-button');
            nextButton.classList.remove('btn-next-disabled');
            nextButton.classList.add('btn-next-active');
            
            // Cambiar el texto si es la última pregunta
            if (currentQuestionIndex === quizQuestions.length - 1) {
                nextButton.textContent = 'Ver Resultados';
            }
        }

        function nextQuestion() {
            currentQuestionIndex++;
            loadQuestion();
            document.getElementById('next-button').textContent = 'Siguiente';
        }

        function showResult() {
            const totalQuestions = quizQuestions.length;
            const percentage = (score / totalQuestions) * 100;
            const messageEl = document.getElementById('final-message');
            const feedbackEl = document.getElementById('feedback-text-final');

            document.getElementById('quiz-area').classList.add('hidden');
            document.getElementById('result-area').classList.remove('hidden');
            document.getElementById('score-text').textContent = `${score} de ${totalQuestions}`;

            // Resetear estilos de mensaje
            messageEl.className = 'text-3xl font-extrabold mb-4';
            
            if (percentage === 100) {
                messageEl.textContent = "¡Felicitaciones! ¡Puntuación Perfecta!";
                messageEl.classList.add('text-green-600');
                feedbackEl.textContent = "Demuestras un dominio excepcional del protocolo de gestión de residuos de Unicatólica.";
            } else if (percentage >= 60) {
                messageEl.textContent = "¡Buen Trabajo!";
                messageEl.classList.add('text-yellow-600');
                feedbackEl.textContent = "Has entendido los conceptos clave. Un repaso rápido a las preguntas falladas te ayudará a lograr la excelencia.";
            } else {
                messageEl.textContent = "A Seguir Practicando...";
                messageEl.classList.add('text-red-600');
                feedbackEl.textContent = "Te recomendamos repasar a fondo el Código de Colores. ¡El compromiso ambiental es crucial!";
            }
        }

        function restartQuiz() {
            // Volver a la infografía
            document.getElementById('quiz-container').classList.add('hidden');
            document.getElementById('infographic-content').classList.remove('hidden');
            window.scrollTo({ top: document.getElementById('quiz-start-area').offsetTop, behavior: 'smooth' });
        }
    </script>
</body>
</html>